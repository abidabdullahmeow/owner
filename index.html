<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8"><title>Owner Dashboard</title></head>
<body style="font-family: sans-serif; padding: 50px;">
    <h1>Cinnamedic | Global Owner Dashboard</h1>
    <div id="user-list">Loading pending users...</div>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = { apiKey: "AIzaSyB-NGIHK_xFoMFhWwREDsEhSB_0UiheFW4",
            authDomain: "cinnamon-clinic-app.firebaseapp.com",
            databaseURL: "https://cinnamon-clinic-app-default-rtdb.asia-southeast1.firebasedatabase.app/",
            projectId: "cinnamon-clinic-app",
            storageBucket: "cinnamon-clinic-app.firebasestorage.app",
            messagingSenderId: "935991281187",
            appId: "1:935991281187:web:03b7e889038c144f455396" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        db.ref('users').on('value', snap => {
            const div = document.getElementById('user-list');
            div.innerHTML = '';
            snap.forEach(child => {
                const u = child.val();
                if(!u.isApproved) {
                    div.innerHTML += `
                        <div style="border:1px solid #ccc; padding:10px; margin:10px;">
                            ${u.email} - Role: ${u.role}
                            <button onclick="approve('${child.key}')">Approve Access</button>
                        </div>`;
                }
            });
        });

        function approve(uid) {
            db.ref('users/' + uid).update({ isApproved: true });
            alert("User Approved!");
        }
    </script>
</body>
</html>
